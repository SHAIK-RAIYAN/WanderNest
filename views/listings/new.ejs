<% layout('layouts/boilerplate') %>
<body id="internalPage" data-page="new">
  <div class="container my-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-11 col-lg-9 col-xl-8">
        <% if (error && error.length > 0) { %>
        <div class="alert-wrapper container mt-4">
          <div
            class="alert alert-danger alert-dismissible fade show"
            role="alert">
            <%= error[0] %>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="Close"
              onclick="this.closest('.alert-wrapper').remove()"></button>
          </div>
        </div>
        <% } %>

        <!-- Card-like Form Box -->
        <div class="border border-secondary-subtle rounded p-4">
          <h1 class="mb-4">Create a New Listing</h1>
          <form
            action="/listings"
            method="POST"
            class="needs-validation"
            enctype="multipart/form-data"
            novalidate>
            <!-- Title -->
            <div class="mb-3">
              <label for="title" class="form-label">Title:</label>
              <input
                type="text"
                id="title"
                name="listing[title]"
                class="form-control"
                required />
              <div class="invalid-feedback">Please enter a Title.</div>
            </div>

            <!-- Description -->
            <div class="mb-3">
              <label for="description" class="form-label">Description:</label>
              <textarea
                id="description"
                name="listing[description]"
                rows="4"
                class="form-control"
                required></textarea>
              <div class="invalid-feedback">Please enter a Description.</div>
            </div>

            <!-- Price + Country -->
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="price" class="form-label">Price (â‚¹):</label>
                <input
                  type="number"
                  id="price"
                  name="listing[price]"
                  class="form-control"
                  required />
                <div class="invalid-feedback">Please enter a valid Price.</div>
              </div>
              <div class="mb-3">
                <label for="country" class="form-label">Country:</label>
                <select
                  id="country"
                  name="listing[country]"
                  class="form-select"
                  required>
                  <!-- options will be injected here -->
                </select>
                <div class="invalid-feedback">Please select a Country.</div>
              </div>
            </div>

            <!-- Image file upload -->
            <div class="mb-3">
              <label for="image" class="form-label">Upload Image:</label>

              <input
                type="file"
                id="image"
                name="image"
                class="form-control"
                accept="image/*"
                required />
              <div class="invalid-feedback">Please provide an Image.</div>
            </div>

            <!-- Location -->
            <div class="mb-3">
              <label for="location" class="form-label">Location:</label>
              <input
                type="text"
                id="location"
                name="listing[location]"
                class="form-control"
                required />
              <div class="invalid-feedback">Please enter a Location.</div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-dark fw-bold">
              Create Listing
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</body>
